<html lang="en">
<head>
    <meta charset="UTF-8">
    

    <!-- 添加预加载翻译文件 -->
    <link rel="preload" href="./i18n/zh.json" as="fetch" crossorigin="anonymous">
    <link rel="preload" href="./i18n/en.json" as="fetch" crossorigin="anonymous">
    
    <title>南京地铁-the-next-train</title>
    <link rel="stylesheet" href="./style.css">

</head>
<body>
    <!-- 导航栏 -->
    <div class="navbar">
        <!-- 左侧导航按钮 -->
        <a href="about.html" target="_self">关于</a>
        <a id="locale-selection" onclick="" target="_self">英文/English</a>
        <a href="choosecity.html" target="_self"> </a>
        <div class="dropdown">
            <span class="dropbtn">自定义背景</span>
            <div class="dropdown-content">
                <a href="#" onclick="document.getElementById('bgUpload').click();">选择图片</a>
                <a href="#" onclick="resetBg();">重置背景</a>
            </div>
        </div>
        <input type="file" id="bgUpload" accept="image/*" style="display: none" onchange="changeBg(event)">

        <div class="dropdown">
            <span class="dropbtn">更多</span>
            <div class="dropdown-content">
                <a href="linequery.html" target="_self">线路查询</a>
                <a href="feedback.html" target="_self">反馈</a>
            </div>
        </div>

        <!-- 右侧图片占位符 -->
        <img src="placeholder.png" alt="">
    </div>

    <h1 style="text-align: center; color: orange; margin-bottom: 30px; font-family: SimHei">南京地铁 The-Next-Train</h1>
    
    <div class="feedback-container">
        <h2>用户反馈</h2>
        <form id="feedbackForm">
            <div class="form-group">
                <label for="name">姓名:</label>
                <input type="text" id="name" name="name" required>
            </div>
            <div class="form-group">
                <label for="email">电子邮件:</label>
                <input type="email" id="email" name="email" required>
            </div>
            <div class="form-group">
                <label for="type">反馈类型:</label>
                <select id="type" name="type">
                    <option value="bug">Bug报告</option>
                    <option value="feature">功能建议</option>
                    <option value="other">其他</option>
                </select>
            </div>
            <div class="form-group">
                <label for="message">您的反馈:</label>
                <textarea id="message" name="message" rows="5" required></textarea>
            </div>
            <button type="submit">提交反馈</button>
        </form>
        <div id="formMessage" class="form-message"></div>
    </div>

    <script>
        function changeBg(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.body.style.backgroundImage = `url(${e.target.result})`;
                    document.body.classList.add('custom-bg');
                    localStorage.setItem('customBg', e.target.result);
                };
                reader.readAsDataURL(file);
            }
        }

        function resetBg() {
            document.body.style.backgroundImage = '';
            document.body.classList.remove('custom-bg');
            localStorage.removeItem('customBg');
        }

        window.onload = function() {
            const savedBg = localStorage.getItem('customBg');
            if (savedBg) {
                document.body.style.backgroundImage = `url(${savedBg})`;
                document.body.classList.add('custom-bg');
            }
        };

        document.getElementById('feedbackForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const formMessage = document.getElementById('formMessage');
            formMessage.textContent = '感谢您的反馈！我们已收到您的消息。';
            formMessage.style.color = 'green';
            formMessage.style.display = 'block';
            // 在这里可以添加实际的表单提交逻辑，例如发送到后端服务器
            // console.log({
            //     name: document.getElementById('name').value,
            //     email: document.getElementById('email').value,
            //     type: document.getElementById('type').value,
            //     message: document.getElementById('message').value
            // });
            document.getElementById('feedbackForm').reset();
        });
    </script>
</body>
</html>